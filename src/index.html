<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Smart Paci</title>
    <script src="index.ts" type="module"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Smart Paci</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div class="container-fluid">
                    <div class="pt-2 pt-lg-0 text-end">
                        <span id="reconnecting" class="d-none px-3 py-2 mx-1 align-middle text-warning-emphasis bg-warning-subtle border border-warning rounded-2">
                            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                            <span>Reconnecting...</span>
                        </span>
                        <button id="btnMcuMgr" class="btn btn-outline-info" type="button" data-bs-toggle="tooltip" data-bs-title="Firmware Management"><i class="bi bi-save"></i></button>
                        <button id="btnDeviceConnect" class="btn btn-outline-success" type="button">Connect</button>
                        <button id="btnDeviceDisconnect" class="btn btn-outline-danger" type="button">Disconnect</button>
                    </div>
                </div>
          </div>
        </div>
      </nav>

      <div class="container-fluid">
          <div class="row">
              <div class="col-md-3 mt-2">
                  <div class="card">
                      <div class="card-body">
                          <h5 class="card-title">
                            Name: <em id="lblName"></em>
                            <button id="btnEditName" type="button" class="btn">
                                <i class="bi bi-pencil-square"></i>
                            </button>
                        </h5>
                          <p class="card-text">
                              Status: <em id="lblStatus">Disconnected</em><br>
                              Version: <em id="lblVersion"></em><br>
                              Commit: <samp id="lblCommit"></samp><br>
                              Built: <em id="lblBuildDate"></em><br>
                              Battery: <em id="lblBattery"></em><br>
                          </p>
                      </div>
                  </div>
                </div>
                <div class="col-md-9 mt-2">
                    <div class="card mb-2">
                        <div class="card-body">
                            <h5 class="card-title">Senor Readings</h5>
                            <div class="card-text">
                                <h6>Bite:</h6>
                                <div class="progress">
                                    <div id="progBite" class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="card-text mt-2 d-none">
                                <h6>Suck:</h6>
                                <div class="progress">
                                    <div id="progSuck" class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="mt-3">
                                    <button id="btnCalibrateSuckMin" type="button" class="btn btn-outline-secondary" disabled>Set Min</button>
                                    <button id="btnCalibrateSuckMax" type="button" class="btn btn-outline-secondary" disabled>Set Max</button>
                                </div>
                            </div>
                            <div class="card-text mt-2">
                                <h6>Touch:</h6>
                                <div class="btn-group" role="group">
                                    <input type="checkbox" disabled class="btn-check" id="btnTouchCheck0" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="btnTouchCheck0">Touch 1</label>

                                    <input type="checkbox" disabled class="btn-check" id="btnTouchCheck1" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="btnTouchCheck1">Touch 2</label>

                                    <input type="checkbox" disabled class="btn-check" id="btnTouchCheck2" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="btnTouchCheck2">Touch 3</label>

                                    <input type="checkbox" disabled class="btn-check" id="btnTouchCheck3" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="btnTouchCheck3">Touch 4</label>
                                </div>
                                <div class="accordion mt-2">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                                                Touch sound files
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse">
                                            <div class="accordion-body">
                                                <div class="mb-3">
                                                    <label class="form-label" for="inputTouchFile0">
                                                        <i class="bi bi-soundwave"></i>
                                                        Touch 1
                                                        <span></span>
                                                        <button type="button" class="btn-close d-none"></button>
                                                    </label>
                                                    <input type="file" class="form-control" id="inputTouchFile0" accept="audio/*" alt="test">
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label" for="inputTouchFile1">
                                                        <i class="bi bi-soundwave"></i>
                                                        Touch 2
                                                        <span></span>
                                                        <button type="button" class="btn-close d-none"></button>
                                                    </label>
                                                    <input type="file" class="form-control" id="inputTouchFile1" accept="audio/*" alt="test">
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label" for="inputTouchFile2">
                                                        <i class="bi bi-soundwave"></i>
                                                        Touch 3
                                                        <span></span>
                                                        <button type="button" class="btn-close d-none"></button>
                                                    </label>
                                                    <input type="file" class="form-control" id="inputTouchFile2" accept="audio/*" alt="test">
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label" for="inputTouchFile3">
                                                        <i class="bi bi-soundwave"></i>
                                                        Touch 4
                                                        <span></span>
                                                        <button type="button" class="btn-close d-none"></button>
                                                    </label>
                                                    <input type="file" class="form-control" id="inputTouchFile3" accept="audio/*" alt="test">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                      <div class="card mb-2">
                        <div class="card-body">
                            <h5 class="card-title">Mcu Management</h5>
                            <div class="mb-3">
                                <label for="fileFirmware" class="form-label">Firmware Image (.dfu or .bin)</label>
                                <input class="form-control" type="file" id="fileFirmware" accept=".dfu,.bin" aria-describedby="fileFirmwareValidation">
                                <div id="fileFirmwareValidation" class="invalid-feedback">test</div>
                            </div>
                            <div>
                                <button type="button" class="btn btn-warning" id="btnUploadFirmware">Update</button>
                                <div id="btnUploadFirmwareValidation" class="invalid-feedback"></div>
                            </div>
                        </div>
                    </div>
                  </div>
          </div>
      </div>

    <!-- Modal -->
    <div class="modal fade" id="firmwareUploadModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="carousel slide">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5">Firmware Upload</h1>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-warning" role="alert">
                                <ul>
                                    <li>Do not close or refresh this page.</li>
                                    <li>This may prevent your paci from operating correctly. For support please contact us at <a href="https://curious.toys/support">https://curious.toys/support</a></li>
                                </ul>
                            </div>
                            <p>Are you sure you want to proceed?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="firmwareUploadCloseButton" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-warning" id="firmwareUploadProceedButton">Proceed</button>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5">
                                <div class="spinner-border me-2 align-middle text-primary" role="status"></div>
                                Uploading Firmware...
                            </h1>
                        </div>
                        <div class="modal-body">
                            This may take several minutes. Please be patient.
                            <div class="progress">
                                <div id="uploadProgress" class="progress-bar progress-bar-striped progress-bar-animated bg-warning text-dark" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5">
                                <div class="spinner-border me-2 align-middle text-primary" role="status"></div>
                                Rebooting...
                            </h1>
                        </div>
                        <div class="modal-body">
                            <p>Give it a minute while the device updates...</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div id="dialogUploadSuccess">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5">Firmware Update Complete!</h1>
                            </div>
                            <div class="modal-body">
                                <p>All done! 🎉</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                        <div id="dialogUploadFail">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5">Firmware Update Failed</h1>
                            </div>
                            <div class="modal-body">
                                <p>Something appears to gave gone wrong. The device isn't running the firmware we just uploaded...</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </body>
</html>
